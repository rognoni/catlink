# v0.1.0 â€“ codename: Sphynx (work-in-progress...)

This first release is focused on the core functionalities of the search engine (Full-text search):

- create database migration (category, url, html, title, description, og_image, views)
- create model `Link`
- create controller `LinkController`
- create Blade views (home, link_categories, link_search, link_detail, original_html) 

## Database Migration

Inside Docker execute:

```
root@7fc82e008715:/var/www/html/CatLink# php artisan make:migration create_links_table

   INFO  Migration [database/migrations/2023_07_22_232301_create_links_table.php] created successfully.
```

execute migrations (only to make a test)

```
root@7fc82e008715:/var/www/html/CatLink# php artisan migrate

   INFO  Running migrations.  

  2014_10_12_100000_create_password_reset_tokens_table ......................................................................... 113ms DONE
  2019_08_19_000000_create_failed_jobs_table .................................................................................... 44ms DONE
  2019_12_14_000001_create_personal_access_tokens_table ......................................................................... 35ms DONE
  2023_07_22_232301_create_links_table .......................................................................................... 13ms DONE
```

Note: `2014_10_12_000000_create_users_table` already exists because the local database is the copy of production

To refresh only a specific file use this:

```
php artisan migrate:refresh --path="database/migrations/2023_07_22_232301_create_links_table.php"
```

Now this is the last (batch) and you can use teh classic `php artisan migrate:rollback`

```
root@0e5ad5d418f8:/var/www/html/CatLink# php artisan migrate:rollback

   INFO  Rolling back migrations.  

  2023_07_22_232301_create_links_table ................................................................................................... 86ms DONE

root@0e5ad5d418f8:/var/www/html/CatLink# php artisan migrate         

   INFO  Running migrations.  

  2023_07_22_232301_create_links_table .................................................................................................. 101ms DONE
```

To see the migraton SQL you have to rollback end execute `php artisan migrate --pretend`

```
  2023_07_22_232301_create_links_table .............................................................................................................  
  â‡‚ create table `links` (`id` bigint unsigned not null auto_increment primary key, `category` varchar(100) not null, `url` varchar(2000) not null, `html` longtext null, `title` varchar(100) null, `description` varchar(500) null, `og_image` varchar(2000) null, `views` int not null default '0', `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  â‡‚ ALTER TABLE links ADD FULLTEXT links_html_index (html)  
```

ðŸ’¡ Note: this is a possible **workaround** for the issue [#1](https://github.com/rognoni/catlink/issues/1)


(TODO)

## Link (model)

Inside Docker execute:

```
root@7fc82e008715:/var/www/html/CatLink# php artisan make:model Link --controller

   INFO  Model [app/Models/Link.php] created successfully.  

   INFO  Controller [app/Http/Controllers/LinkController.php] created successfully.
```

(TODO)

## Blade (home)

![home page](../images/home.jpg)
